<template>
  <my-ref url="/${group}/${entity_url}/ref"
          v-model="value" @loaded="procData" :multi="multi" :page-size="10"
          ref="list" name="${title}" :store="true"  v-bind="[$attrs]"
          :readOnly="readOnly" @change="(v,a)=>$emit('input',v,a)"
  >
    <el-table-column type="index" clign="center" width="50"></el-table-column>
        <!--<template slot-scope="scope"></template>-->
${for:fields}            <el-table-column align="center" label="${remark}" prop="${name}"></el-table-column>${endfor}
    <template #query="scope">
      <kv label="名称">
        <el-input v-model="scope.query.name"></el-input>
      </kv>
    </template>
    <template #button>
      <el-button>选择${title}</el-button>
    </template>
  </my-ref>
</template>
<script>
  export default {
    name: "ref-${entity_url}",
    props: {
      readOnly: {type: Boolean, default: false},
      multi: {type: Boolean, default: false}, //多选
      value: {
        type: [Object, Array], default: function () {
          return []
        }
      }
    },
    data() {
      return {}
    },
    methods: {
      procData(res, op) {
        var json = res.data.data;
        json.forEach(it => {
            //如果是组合实体，设置 it.id=...
            //处理枚举 jv.枚举.fillRes(it,字段)
        });
      }
    }
  }
</script>